<!DOCTYPE html>
<html>
<head>
	<!-- Link to the google font "Fredericka the Great" -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Fredericka+the+Great&display=swap" rel="stylesheet">
	<!-- Link to the CSS stylesheet -->
	 	<link rel="stylesheet" type="text/css" href="../css/site.css">
		<link rel="stylesheet" type="text/css" href="css/main.css">
	<!-- Link to the JS main file -->
	 	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script> 
    	<script src="js/main.js" DEFER></script>
</head>
<body>
	<a href="../index.html"><img id="Back_button" src="../img/Back_button.png" alt="Back_button" class="Back_button"></img></a>
	<div class="options-bar">
		<div class="menu-icon">â˜°</div>
	</div>

	<!--Audio files-->
	<audio id="chiaSound" class="effects" src="audio-files/chia-sound.mp3" preload="auto"></audio>
	<audio id="click" class="effects" src="audio-files/click.mp3" preload="auto"></audio>
	
	<main>
		<h1 class="header fredericka-the-great-regular">Greenhouse</h1>

			<img id="Main_Greenhouse" src="img/greenhouse_white_background.png" alt="Main_Greenhouse" class="main_greenhouse">
			<img id="Fear_sprout"     src="img/fearsprout.PNG"                  alt="Fear_sprout"     class="fear_sprout">
			<img id="happy_sprout"    src="img/happysprout.PNG"                 alt="happy_sprout"    class="happy_sprout">
			<img id="lily_sprout"     src="img/lilysprout.PNG"                  alt="lily_sprout"     class="lily_sprout">
			<img id="petunia_sprout"  src="img/angersprout.PNG"                 alt="petunia_sprout"  class="petunia_sprout">
			<img id="sad_sprout"      src="img/sadsprout.PNG"                   alt="sad_sprout"      class="sad_sprout">
			<img id="venus_sprout"    src="img/venussprout.PNG"                 alt="venus_sprout"    class="venus_sprout">
	</main>
	<script>
		document.addEventListener("DOMContentLoaded", () => {
		  const emotion = localStorage.getItem("activeEmotion");
		  if (!emotion) return;
	  
		  const growthStage = parseInt(localStorage.getItem(emotion + "_clicks")) || 1;
	  
		  // Map emotions to sprout IDs
		  const emotionToSprout = {
			fear: "Fear_sprout",
			happiness: "happy_sprout",
			surprise: "lily_sprout",
			anger: "petunia_sprout",
			sadness: "sad_sprout",
			disgust: "venus_sprout"
		  };
	  
		  // Hide all sprouts
		  const sproutIds = Object.values(emotionToSprout);
		  sproutIds.forEach(id => {
			const sprout = document.getElementById(id);
			if (sprout) {
			  sprout.style.display = "none";
			}
		  });
	  
		  // Show and update the corresponding sprout
		  const sproutId = emotionToSprout[emotion];
		  const sprout = document.getElementById(sproutId);
		  if (sprout) {
			sprout.style.display = "block";
	  
			// Choose the right image file based on click count
			const baseSrc = sprout.getAttribute("src").replace(/(\d*)\.PNG$/, '');
			const stage = Math.min(growthStage, 3); // Cap at stage 3
			sprout.setAttribute("src", `${baseSrc}${stage}.PNG`);	
		  }
		});
	  </script>
</body>
</html>
